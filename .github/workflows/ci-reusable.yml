# ============================================
# WORKFLOW: CI com Workflows ReutilizÃ¡veis
# Demonstra como chamar workflows reutilizÃ¡veis
# ============================================
name: ðŸš€ CI with Reusable Workflows

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  # ============================================
  # Chamar workflow reutilizÃ¡vel com Node 18
  # ============================================
  test-node-18:
    name: ðŸ§ª Test Node 18
    uses: ./.github/workflows/reusable-test.yml
    with:
      node-version: '18'
  
  # ============================================
  # Chamar workflow reutilizÃ¡vel com Node 20
  # ============================================
  test-node-20:
    name: ðŸ§ª Test Node 20
    uses: ./.github/workflows/reusable-test.yml
    with:
      node-version: '20'
  
  # ============================================
  # Deploy sÃ³ apÃ³s todos os testes passarem
  # ============================================
  deploy:
    name: ðŸš€ Deploy
    runs-on: ubuntu-latest
    needs: [test-node-18, test-node-20]
    
    steps:
      - name: ðŸš€ Deploy
        run: echo "âœ… Todos os testes passaram! Deploying..."
